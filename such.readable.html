<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>such.readable documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Suchwow 4.3.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>such</span></div></div></li><li class="depth-2 branch"><a href="such.better-doc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>better-doc</span></div></a></li><li class="depth-2 branch"><a href="such.casts.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>casts</span></div></a></li><li class="depth-2 branch"><a href="such.control-flow.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>control-flow</span></div></a></li><li class="depth-2 branch"><a href="such.doc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>doc</span></div></a></li><li class="depth-2 branch"><a href="such.environment.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>environment</span></div></a></li><li class="depth-2 branch"><a href="such.function-makers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>function-makers</span></div></a></li><li class="depth-2 branch"><a href="such.immigration.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>immigration</span></div></a></li><li class="depth-2 branch"><a href="such.imperfection.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>imperfection</span></div></a></li><li class="depth-2 branch"><a href="such.maps.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>maps</span></div></a></li><li class="depth-2 branch"><a href="such.metadata.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>metadata</span></div></a></li><li class="depth-2 branch"><a href="such.ns.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ns</span></div></a></li><li class="depth-2 branch"><a href="such.ns-state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ns-state</span></div></a></li><li class="depth-2 branch"><a href="such.random.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>random</span></div></a></li><li class="depth-2 branch current"><a href="such.readable.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>readable</span></div></a></li><li class="depth-2 branch"><a href="such.sequences.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sequences</span></div></a></li><li class="depth-2 branch"><a href="such.shorthand.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>shorthand</span></div></a></li><li class="depth-2 branch"><a href="such.symbols.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>symbols</span></div></a></li><li class="depth-2 branch"><a href="such.types.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>types</span></div></a></li><li class="depth-2 branch"><a href="such.vars.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>vars</span></div></a></li><li class="depth-2 branch"><a href="such.versions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>versions</span></div></a></li><li class="depth-2 branch"><a href="such.wide-domains.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wide-domains</span></div></a></li><li class="depth-2"><a href="such.wrongness.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wrongness</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="such.readable.html#var-default-function-elaborations"><div class="inner"><span>default-function-elaborations</span></div></a></li><li class="depth-1"><a href="such.readable.html#var-elaborate-fn-symbol"><div class="inner"><span>elaborate-fn-symbol</span></div></a></li><li class="depth-1"><a href="such.readable.html#var-fn-string"><div class="inner"><span>fn-string</span></div></a></li><li class="depth-1"><a href="such.readable.html#var-fn-symbol"><div class="inner"><span>fn-symbol</span></div></a></li><li class="depth-1"><a href="such.readable.html#var-forget-translations.21"><div class="inner"><span>forget-translations!</span></div></a></li><li class="depth-1"><a href="such.readable.html#var-instead-of"><div class="inner"><span>instead-of</span></div></a></li><li class="depth-1"><a href="such.readable.html#var-rename"><div class="inner"><span>rename</span></div></a></li><li class="depth-1"><a href="such.readable.html#var-set-function-elaborations.21"><div class="inner"><span>set-function-elaborations!</span></div></a></li><li class="depth-1"><a href="such.readable.html#var-value"><div class="inner"><span>value</span></div></a></li><li class="depth-1"><a href="such.readable.html#var-value-string"><div class="inner"><span>value-string</span></div></a></li><li class="depth-1"><a href="such.readable.html#var-with-function-elaborations"><div class="inner"><span>with-function-elaborations</span></div></a></li><li class="depth-1"><a href="such.readable.html#var-with-translations"><div class="inner"><span>with-translations</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">such.readable</h2><div class="doc"><div class="markdown"><p>Stringify nested structures such that all functions - and particular values of your choice - are displayed in a more readable way. <a href="such.readable.html#var-value-string">value-string</a> and <a href="such.readable.html#var-fn-symbol">fn-symbol</a> are the key functions.</p></div></div><div class="public anchor" id="var-default-function-elaborations"><h3>default-function-elaborations</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Anonymous functions are named <code>fn</code> and functions are surrounded by <code>&lt;&gt;</code></p></div></div><div class="src-link"><a href="https://github.com/marick/suchwow/blob/master/src/such/readable.clj#L14">view source</a></div></div><div class="public anchor" id="var-elaborate-fn-symbol"><h3>elaborate-fn-symbol</h3><div class="usage"><code>(elaborate-fn-symbol f {:keys [anonymous-name surroundings]} anonymous-names)</code><code>(elaborate-fn-symbol f)</code></div><div class="doc"><div class="markdown"><p>A more customizable version of <a href="such.readable.html#var-fn-symbol">fn-symbol</a>. Takes <code>f</code>, which <em>must</em> be a function or multimethod. In all cases, the return value is a symbol where <code>f</code>&rsquo;s name is embedded in the <code>surroundings</code>, a string. For example, if the surroundings are &ldquo;&lt;!!&gt;&rdquo;, a result would look like <code>&lt;!cons!&gt;</code>. </p><p><code>f</code>&rsquo;s name is found by these rules, checked in order:</p>
<ul>
  <li><p><code>f</code> has had a name assigned with <code>rename</code>.</p></li>
  <li><p><code>f</code> is a key in <code>(deref anonymous-names)</code>. The value is its name. </p></li>
  <li><p>The function had a name assigned by <code>defn</code>, <code>let</code>,  or the seldom used &ldquo;named lambda&rdquo;: <code>(fn name [...] ...)</code>.  Note that multimethods do not have accessible names in current versions  of Clojure. They are treated as anonymous functions.</p></li>
  <li><p>The function is anonymous and there are no other anonymous names. The name is  <code>anonymous-name</code>, which is also stored in the <code>anonymous-names</code> atom.</p></li>
  <li><p>After the first anonymous name, the names are <code>&lt;anonymous-name&gt;-2</code> <code>&lt;anonymous-name&gt;-3</code>  and so on.</p></li>
</ul><p>In the single-argument version, the global or default elaborations are used, and <code>anonymous-names</code> is empty. See <a href="such.readable.html#var-set-function-elaborations.21">set-function-elaborations!</a>.</p></div></div><div class="src-link"><a href="https://github.com/marick/suchwow/blob/master/src/such/readable.clj#L119">view source</a></div></div><div class="public anchor" id="var-fn-string"><h3>fn-string</h3><div class="usage"><code>(fn-string f)</code></div><div class="doc"><div class="markdown"><p><code>str</code> applied to the result of <a href="such.readable.html#var-fn-symbol">fn-symbol</a>.</p></div></div><div class="src-link"><a href="https://github.com/marick/suchwow/blob/master/src/such/readable.clj#L173">view source</a></div></div><div class="public anchor" id="var-fn-symbol"><h3>fn-symbol</h3><div class="usage"><code>(fn-symbol f)</code></div><div class="doc"><div class="markdown"><p>Transform <code>f</code> into a symbol with a more pleasing string representation. <code>f</code> <em>must</em> be a function or multimethod.</p>
<pre><code>(fn-symbol even?) =&gt; &#39;&lt;even?&gt;
(fn-symbol (fn [])) =&gt; &#39;&lt;fn&gt;
(fn-symbol (fn name [])) =&gt; &#39;&lt;name&gt;
(let [foo (fn [])] (fn-symbol foo)) =&gt; &#39;&lt;foo&gt;
</code></pre><p>See <a href="such.readable.html#var-elaborate-fn-symbol">elaborate-fn-symbol</a> for the gory details.</p></div></div><div class="src-link"><a href="https://github.com/marick/suchwow/blob/master/src/such/readable.clj#L159">view source</a></div></div><div class="public anchor" id="var-forget-translations.21"><h3>forget-translations!</h3><div class="usage"><code>(forget-translations!)</code></div><div class="doc"><div class="markdown"><p>There is a global store of translations from values to names, used by <a href="such.readable.html#var-with-translations">with-translations</a> and <a href="null">value-strings</a>. Empty it.</p></div></div><div class="src-link"><a href="https://github.com/marick/suchwow/blob/master/src/such/readable.clj#L54">view source</a></div></div><div class="public anchor" id="var-instead-of"><h3>instead-of</h3><div class="usage"><code>(instead-of value show)</code></div><div class="doc"><div class="markdown"><p>Arrange for <a href="such.readable.html#var-value-string">value-string</a> to show <code>value</code> as <code>show</code>. <code>show</code> is typically a symbol, but can be anything.</p></div></div><div class="src-link"><a href="https://github.com/marick/suchwow/blob/master/src/such/readable.clj#L60">view source</a></div></div><div class="public anchor" id="var-rename"><h3>rename</h3><div class="usage"><code>(rename f name)</code></div><div class="doc"><div class="markdown"><p>Produce a new function from <code>f</code>. It has the same behavior and metadata, except that <a href="such.readable.html#var-fn-symbol">fn-symbol</a> and friends will use the given <code>name</code>.</p><p>Note: <code>f</code> may actually be any object that allows metadata. That&rsquo;s irrelevant to <code>fn-symbol</code>, which accepts only functions, but it can be used to affect the output of <a href="such.readable.html#var-value-string">value-string</a>.</p></div></div><div class="src-link"><a href="https://github.com/marick/suchwow/blob/master/src/such/readable.clj#L85">view source</a></div></div><div class="public anchor" id="var-set-function-elaborations.21"><h3>set-function-elaborations!</h3><div class="usage"><code>(set-function-elaborations! {:keys [anonymous-name surroundings], :as all})</code></div><div class="doc"><div class="markdown"><p>Control the way functions are prettified. Note: this does not override any value changed with <code>with-function-elaborations</code>.</p>
<pre><code>  (set-function-elaborations! {:anonymous-name &#39;anon :surroundings &quot;&quot;})
</code></pre></div></div><div class="src-link"><a href="https://github.com/marick/suchwow/blob/master/src/such/readable.clj#L21">view source</a></div></div><div class="public anchor" id="var-value"><h3>value</h3><div class="usage"><code>(value x)</code></div><div class="doc"><div class="markdown"><p>Like <a href="such.readable.html#var-value-string">value-string</a>, but the final step of converting the value into a string is omitted. Note that this means functions are replaced by symbols.</p></div></div><div class="src-link"><a href="https://github.com/marick/suchwow/blob/master/src/such/readable.clj#L193">view source</a></div></div><div class="public anchor" id="var-value-string"><h3>value-string</h3><div class="usage"><code>(value-string x)</code></div><div class="doc"><div class="markdown"><p>Currently available only for Clojure 1.6+.</p><p>Except for special values, converts <code>x</code> into a string as with <code>pr-str</code>. Exceptions (which apply anywhere within collections):</p>
<ul>
  <li><p>If a value was given an alternate name in <a href="such.readable.html#var-with-translations">with-translations</a> or <a href="such.readable.html#var-instead-of">instead-of</a>,  that alternate is used.</p></li>
  <li><p>Functions and multimethods are given better names as per <a href="such.readable.html#var-fn-symbol">fn-symbol</a>.</p></li>
</ul><p>Examples:</p>
<pre><code>   (value-string even?) =&gt; &quot;&lt;even?&gt;&quot;
   (value-string {1 {2 [even? odd?]}}) =&gt; &quot;{1 {2 [&lt;even?&gt; &lt;odd?&gt;]}}&quot;

   (instead-of even? &#39;not-odd)
   (value-string {1 {2 [even? odd?]}}) =&gt; &quot;{1 {2 [not-odd &lt;odd?&gt;]}}&quot;

   (def generator (fn [x] (fn [y] (+ x y))))
   (def add2 (generator 2))
   (def add3 (generator 3))
   (value-string [add2 add3 add3 add2]) =&gt; &quot;[&lt;fn&gt; &lt;fn-2&gt; &lt;fn-2&gt; &lt;fn&gt;]&quot;

   (def add4 (rename (generator 4) &#39;add4))
   (def add5 (rename (generator 4) &#39;add5))
   (value-string [add4 add5 add5 add4]) =&gt; &quot;[&lt;add4&gt; &lt;add5&gt; &lt;add5&gt; &lt;add4&gt;]&quot;
</code></pre></div></div><div class="src-link"><a href="https://github.com/marick/suchwow/blob/master/src/such/readable.clj#L213">view source</a></div></div><div class="public anchor" id="var-with-function-elaborations"><h3>with-function-elaborations</h3><h4 class="type">macro</h4><div class="usage"><code>(with-function-elaborations {:keys [anonymous-name surroundings], :as all} &amp; body)</code></div><div class="doc"><div class="markdown"><p>Change the function elaborations, execute the body, and revert the elaborations.</p>
<pre><code> (with-function-elaborations {:anonymous-name &#39;fun :surroundings &quot;{{}}&quot;}
   (fn-symbol (fn []))) =&gt; {{fun}}
</code></pre></div></div><div class="src-link"><a href="https://github.com/marick/suchwow/blob/master/src/such/readable.clj#L30">view source</a></div></div><div class="public anchor" id="var-with-translations"><h3>with-translations</h3><h4 class="type">macro</h4><div class="usage"><code>(with-translations let-style &amp; body)</code></div><div class="doc"><div class="markdown"><p>Describe a set of value-&gt;name translations, then execute the body (which presumably contains a call to <a href="such.readable.html#var-value-string">value-string</a>).</p>
<pre><code>  (with-translations [5 &#39;five
                      {1 2} &#39;amap]
    (value-string {5 {1 2}
                   :key [:value1 :value2 5]}))
  =&gt; &quot;{five amap, :key [:value1 :value2 five]}&quot;
</code></pre></div></div><div class="src-link"><a href="https://github.com/marick/suchwow/blob/master/src/such/readable.clj#L66">view source</a></div></div></div></body></html>